<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Panel administratora â€” Czat</title>
<style>
body {
  font-family: 'Inter', sans-serif;
  background: #f6f7fb;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
}
.chat-box {
  width: 420px;
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  padding: 25px;
}
h2 {
  color: #2a7;
  margin-top: 0;
  text-align: center;
}
#messages {
  height: 280px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 8px;
  margin-bottom: 10px;
  padding: 8px;
  background: #fafafa;
  font-size: 0.95em;
}
.message {
  padding: 6px 10px;
  margin: 4px 0;
  border-radius: 8px;
  max-width: 85%;
}
.user {
  background: #e8f5e9;
  align-self: flex-start;
}
.admin {
  background: #d1ecf1;
  align-self: flex-end;
}
form {
  display: flex;
  gap: 6px;
}
#msgInput {
  flex: 1;
  padding: 10px;
  border: 1.5px solid #ccc;
  border-radius: 8px;
  outline: none;
}
button {
  padding: 10px 14px;
  background: #2a7;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: 0.2s;
}
button:hover {
  background: #1f5;
}
</style>
</head>
<body>

<div class="chat-box">
  <h2>ðŸ’¼ Czat administratora</h2>
  <div id="messages"></div>
  <form id="chatForm">
    <input id="msgInput" placeholder="Napisz wiadomoÅ›Ä‡...">
    <button>WyÅ›lij</button>
  </form>
</div>

<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
const socket = io("http://localhost:3001");
socket.emit("register", "admin", "Administrator");

const messages = document.getElementById("messages");
const form = document.getElementById("chatForm");
const input = document.getElementById("msgInput");


socket.on("chat_message", msg => {

  if (msg.user !== "Administrator") addMessage(msg);
});

form.addEventListener("submit", e => {
  e.preventDefault();
  const text = input.value.trim();
  if (!text) return;
  const msg = { user: "Administrator", text };
  socket.emit("chat_message", msg);
  addMessage(msg);
  input.value = "";
});

function addMessage(msg){
  const div = document.createElement("div");
  div.classList.add("message");
  div.classList.add(msg.user === "Administrator" ? "admin" : "user");
  div.textContent = `${msg.user}: ${msg.text}`;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}
</script>
</body>
</html>
